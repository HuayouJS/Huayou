<!DOCTYPE html>
<html>
	<head>
		<title>Operation of nodes within a layer</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<script src="../../../../dist/huayou.min.js"></script>
		<script src="../../lib/util.js"></script>
		<style>
			html {height: 100%; width: 100%;}
			body {height: 100%; width: 100%; margin:0px;}
		</style>
		<script>
			let viewer, graph;
			function onload() {
				let loader = new Huayou.SVGLoader();
				loader.load("../../models/standard.svg", function (svg){
					graph = new Huayou.Graph(svg);
					viewer = new Huayou.Viewer("container", graph);
					viewer.border = "1px solid black";
				});
			}
			/****** Propertys ******/
			function _children(){
				console.log("children: ");
				let layer = graph.layers.get('device');
				let elements = layer.children;//return Array<Element>
				for (const element of elements.values()){
					console.log(element);
				}
			}
			function _firstElementChild(){
				console.log("firstElementChild: ");
				let layer = graph.layers.get('device');
				let element = layer.firstElementChild;//return Element
				console.log(element);
			}
			function _lastElementChild(){
				console.log("lastElementChild: ");
				let layer = graph.layers.get('device');
				let element = layer.lastElementChild;//return Element
				console.log(element);
			}
			function _childNodes(){
				console.log("childNodes: ");
				let layer = graph.layers.get('device');
				let nodes = layer.childNodes;//return Array<Node>
				for (const node of nodes.values()){
					console.log(node);
				}
			}
			function _firstChild(){
				console.log("firstChild: ");
				let layer = graph.layers.get('device');
				let node = layer.firstChild;//return Node
				console.log(node);
			}
			function _lastChild(){
				console.log("lastChild: ");
				let layer = graph.layers.get('device');
				let node = layer.lastChild;//return Node
				console.log(node);
			}
			function _textContent(){
				console.log("textContent: ");
				let layer = graph.layers.get('device');
				let text = layer.textContent;//return string
				console.log(text);
			}
			function _textContent(){
				console.log("textContent: ");
				let layer = graph.layers.get('device');
				let text = layer.textContent;//return string
				console.log(text);
			}
			/****** Methods ******/
			function _appendChild(){
				let layer = graph.layers.get('device');
				let attrs = {d:"M0,0c0,-70 20,-50 60,-50",transform:"translate(315 155)"};
				let path = Utils.createSVGElement("path",attrs);
				layer.appendChild(path);
			}
			function _append(){
				let layer = graph.layers.get('device');
				let text1  = Utils.createSVGElement("text",{x:315,y:80});
				text1.textContent="Cable";
				let text2  = Utils.createSVGElement("text",{x:315,y:95});
				text2.textContent="connect socket5";
				layer.append(text1,text2);
			}
			function _prepend(){
				let layer = graph.layers.get('device');
				let text1  = Utils.createSVGElement("text",{x:215,y:80});
				text1.textContent="Cable -> prepend";
				let text2  = Utils.createSVGElement("text",{x:215,y:95});
				text2.textContent="connect socket5 -> prepend";
				layer.append(text1,text2);
			}
			function _insertBefore(){
				let layer = graph.layers.get('device');
				let element = layer.lastElementChild;
				let text1  = Utils.createSVGElement("text",{x:10,y:50});
				text1.textContent="insertBefore Node";
				layer.insertBefore(text1,element);
			}
			function _removeChild(){
				let layer = graph.layers.get('tag');
				let element = layer.lastElementChild;
				layer.removeChild(element);
			}
			function _replaceChild(){
				let layer = graph.layers.get('tag');
				let text1  = Utils.createSVGElement("text",{x:20,y:420});
				text1.textContent="replaceChild Node";
				let element = layer.lastElementChild;
				layer.replaceChild(text1, element);
			}
			function _contains(){
				let layer = graph.layers.get('device');
				let text1  = Utils.createSVGElement("text",{x:215,y:80});
				text1.textContent="Cable -> prepend";
				let text2  = Utils.createSVGElement("text",{x:215,y:95});
				text2.textContent="connect socket5 -> prepend";
				layer.appendChild(text1);
				let bool = layer.contains(text1)
				console.log("text1 is",bool);
				bool = layer.contains(text2)
				console.log("text2 is",bool);
			}
			function _hasChildNodes(){
				let layer = graph.layers.get('device');
				let bool = layer.hasChildNodes()
				console.log("hasChildNodes",bool);
			}
		</script>
	</head>
	<body onload="onload()">
		<div style="padding: 10px">
			<button onclick="_children()">children</button>
			<button	onclick="_firstElementChild()">firstElementChild</button>
			<button	onclick="_lastElementChild()">lastElementChild</button>
			<button onclick="_childNodes()">childNodes</button>
			<button onclick="_firstChild()">firstChild</button>
			<button onclick="_lastChild()">lastChild</button>
			<button onclick="_textContent()">textContent</button>
			<button onclick="_appendChild()">appendChild</button>
			<button	onclick="_append()">append</button>
			<button	onclick="_prepend()">prepend</button>
			<button onclick="_insertBefore()">insertBefore</button>
			<button onclick="_removeChild()">removeChild</button>
			<button onclick="_replaceChild()">replaceChild</button>
			<button onclick="_contains()">contains</button>
			<button onclick="_hasChildNodes()">hasChildNodes</button>
		</div>
		<div id="container" style="width:95%;height:80%; position: relative;left:10px;top:10px"></div>
	</body>
</html>
